---
export interface Props {
  id: number;
  instructorName: string;
  instructorTitle: string;
  instructorImage: string;
  workshopImage: string;
  status: "open" | "started" | "closed";
  date: string;
  time: string;
  title: string;
  category: string;
  price: string;
}

const {
  id,
  instructorName,
  instructorTitle,
  instructorImage,
  workshopImage,
  status,
  date,
  time,
  title,
  category,
  price,
} = Astro.props;

// Status badge configuration
const statusConfig = {
  open: {
    icon: `${import.meta.env.ICONS_FOLDER}/badge-workshop-card-open.svg`,
    bgColor: "bg-[#1f8a70]",
    text: "OPEN",
  },
  started: {
    icon: `${import.meta.env.ICONS_FOLDER}/badge-workshop-card-started.svg`,
    bgColor: "bg-orange",
    text: "STARTED",
  },
  closed: {
    icon: `${import.meta.env.ICONS_FOLDER}/badge-workshop-card-closed.svg`,
    bgColor: "bg-[#eb5757]",
    text: "CLOSED",
  },
};

const currentStatus = statusConfig[status];
---

<div
  class="bg-white rounded-[12px] md:rounded-[20px] lg:rounded-[24px] p-3 md:p-5 lg:p-6 w-full max-w-[250px] md:max-w-full flex flex-col gap-4 md:gap-6 lg:gap-9 shadow-sm hover:shadow-xl hover:shadow-purple/15 hover:-translate-y-2 transition-all duration-300 ease-out flex-shrink-0 cursor-pointer group relative overflow-hidden border border-transparent hover:border-blue"
>
  <!-- Instructor Info & Workshop Image -->
  <div class="flex flex-col gap-3 md:gap-4 lg:gap-[18px] w-full">
    <!-- Instructor Profile -->
    <div class="flex gap-2 md:gap-3 items-center w-full relative z-10">
      <div
        class="w-12 h-12 md:w-14 md:h-14 lg:w-16 lg:h-16 rounded-full overflow-hidden flex-shrink-0"
      >
        <img
          src={instructorImage}
          alt={instructorName}
          class="w-full h-full object-cover transition-all duration-300 ease-out group-hover:scale-105"
        />
      </div>
      <div class="flex flex-col gap-0.5 flex-grow min-w-0">
        <h3
          class="font-semibold text-[#09093c] text-sm md:text-base lg:text-lg leading-tight transition-colors duration-300 ease-out group-hover:text-blue"
        >
          {instructorName}
        </h3>
        <p
          class="font-medium text-[#757c98] text-xs md:text-sm lg:text-base leading-tight transition-colors duration-300 ease-out"
        >
          {instructorTitle}
        </p>
      </div>
    </div>

    <!-- Workshop Image with Status Badge -->
    <div
      class="relative w-full h-[140px] md:h-[170px] lg:h-[200px] rounded-[8px] md:rounded-[12px] lg:rounded-[16px] overflow-hidden transition-all duration-300 ease-out"
    >
      <img
        src={workshopImage}
        alt={title}
        class="w-full h-full object-cover transition-all duration-300 ease-out group-hover:scale-105"
      />

      <!-- Status Badge -->
      <div
        class={`absolute top-2 left-2 md:top-3 md:left-3 ${currentStatus.bgColor} flex items-center gap-1 px-3 py-2 md:px-4 md:py-2.5 lg:px-5 lg:py-3 rounded-[100px] transition-all duration-300 ease-out z-10 w-fit`}
      >
        <img
          src={currentStatus.icon}
          alt={status}
          class="w-4 h-4 md:w-5 md:h-5 lg:w-6 lg:h-6"
        />
        <span
          class="font-semibold text-white text-xs md:text-sm lg:text-base whitespace-nowrap"
        >
          {currentStatus.text}
        </span>
      </div>
    </div>

    <!-- Workshop Details -->
    <div class="flex flex-col gap-1.5 md:gap-2 w-full">
      <!-- Date and Time -->
      <div class="flex gap-2 md:gap-3 items-start w-full">
        <div class="flex items-center gap-1">
          <img
            src={`${import.meta.env.ICONS_FOLDER}/calendar-2.svg`}
            alt="Calendar"
            class="w-4 h-4 md:w-5 md:h-5 lg:w-6 lg:h-6"
          />
          <span
            class="font-medium text-[#757c98] text-xs md:text-sm lg:text-base capitalize"
          >
            {date}
          </span>
        </div>
        <div class="flex items-center gap-1">
          <img
            src={`${import.meta.env.ICONS_FOLDER}/timer.svg`}
            alt="Time"
            class="w-4 h-4 md:w-5 md:h-5 lg:w-6 lg:h-6"
          />
          <span
            class="font-medium text-[#757c98] text-xs md:text-sm lg:text-base capitalize"
          >
            {time}
          </span>
        </div>
      </div>

      <!-- Workshop Title -->
      <h2
        class="font-semibold text-[#09093c] text-base md:text-lg lg:text-xl leading-[1.3] md:leading-[1.35] lg:leading-[1.4] capitalize line-clamp-2 transition-colors duration-300 ease-out group-hover:text-blue"
      >
        {title}
      </h2>

      <!-- Category -->
      <p
        class="font-medium text-[#757c98] text-xs md:text-sm lg:text-base transition-colors duration-300 ease-out"
      >
        {category}
      </p>
    </div>
  </div>

  <!-- Price and Action Button -->
  <div class="flex gap-3 md:gap-4 lg:gap-6 items-center w-full">
    <!-- Price -->
    <div class="flex items-center gap-1 md:gap-1.5 flex-grow">
      <span
        class="font-semibold text-[#eb5757] text-lg md:text-xl lg:text-2xl whitespace-nowrap transition-colors duration-300 ease-out group-hover:text-blue"
      >
        {price}
      </span>
      <span
        class="font-medium text-[#757c98] text-xs md:text-sm lg:text-base whitespace-nowrap transition-colors duration-300 ease-out"
      >
        /person
      </span>
    </div>

    <!-- Action Button -->
    <div
      class="bg-[rgba(252,155,76,0.09)] flex items-center justify-center p-2 md:p-2.5 lg:p-3 rounded-[100px] transition-all duration-300 ease-out cursor-pointer group-hover:bg-purple/25 group-hover:scale-105"
    >
      <div
        class="bg-orange w-5 h-5 md:w-5.5 md:h-5.5 lg:w-6 lg:h-6 rounded-full flex items-center justify-center transition-all duration-300 ease-out group-hover:bg-purple-600 group-hover:scale-110"
      >
        <span
          class="font-bold text-white text-sm md:text-sm lg:text-base leading-none transition-all duration-300 ease-out"
        >
          &gt;
        </span>
      </div>
    </div>
  </div>
</div>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
